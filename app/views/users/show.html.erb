<div class='row'>
  
  <div class='col-xs-3'>
    <h2>User info</h2>
    <%= render 'info', user: @user,now: ''%>

    <h2>New book</h2>
    <%= render 'books/form', book: @book %>

  </div>

  <div class='col-xs-9'>
    <h2>Books</h2>

    <%= render 'books/index',books: @books %>
  </div>

  <% if current_user == @user %>
    <div id="map" style="width: 100%; height: 400px;"></div>
    <script>
      function initMap(){
        var location = {
          lat: <%= @user.latitude %>,
          lng: <%= @user.longitude %>
        }

        if (location.latitude && location.longitude) return 

        var map = new google.maps.Map(document.getElementById('map'), {
          center: location,
          zoom: 16
        });

        new google.maps.Marker({
          map: map,
          position: location
        });
      }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=<%= ENV['GOOGLE_API_KEY'] %>&callback=initMap" async defer></script>
  <% end %>
</div>